{"ast":null,"code":"import _classCallCheck from\"/Users/ericboris/Developer/CSE442/a4/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ericboris/Developer/CSE442/a4/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/ericboris/Developer/CSE442/a4/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/ericboris/Developer/CSE442/a4/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ericboris/Developer/CSE442/a4/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Container,Form,Button}from'react-bootstrap';import{sha256}from'js-sha256';//import {render} from \"react-dom\";\n//import get from '../../descriptionLoader';\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var difficulty=4;// number of zeros required at front of hash\nvar maximumNonce=500000;// limit the nonce to this so we don't mine too long\nvar Block=/*#__PURE__*/function(_Component){_inherits(Block,_Component);var _super=_createSuper(Block);function Block(props){var _this;_classCallCheck(this,Block);_this=_super.call(this,props);var title=\"Coinbase [WORK IN PROGRESS] \",body=\"Coinbase's Description\";_this.state={pattern:'0'.repeat(difficulty),blockNumber:1,nonce:72608,data:\"\",hash:sha256(\"1\"+\"72608\"+\"\"),title:title,body:body,//green\ncolor:\"#50C878\"};_this.getSequence=_this.getSequence.bind(_assertThisInitialized(_this));_this.mine=_this.mine.bind(_assertThisInitialized(_this));_this.handleColorChange=_this.handleColorChange.bind(_assertThisInitialized(_this));return _this;}_createClass(Block,[{key:\"handleColorChange\",value:function handleColorChange(){var col=this.state.color;this.props.getColor(col);}},{key:\"getSequence\",value:function getSequence(){return this.blockNumber.value.toString()+this.nonce.value.toString()+this.data.value.toString();}/* Find a nonce s.t. the hash of the string concatenation of\n     * blockNumber, nonce, and data fields (IN THAT ORDER!) results in a hash\n     * that starts with n=difficulty many zeros.\n     * Updates the state with the found nonce and hash.\n     */},{key:\"mine\",value:function mine(blockNumber,data){var sequence=null;var hash=null;for(var nonce=0;nonce<=maximumNonce;nonce++){sequence=blockNumber.toString()+nonce.toString()+data.toString();hash=sha256(sequence);if(hash.substr(0,difficulty)===this.state.pattern){this.setState({hash:hash,nonce:nonce});return;}}this.setState({color:\"#50C878\"});this.handleColorChange(this.state.color);}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsxs(Container,{fluid:true,children:[/*#__PURE__*/_jsx(\"h2\",{children:this.state.title}),/*#__PURE__*/_jsx(\"div\",{children:this.state.body.split('\\n\\n').map(function(paragraph){return/*#__PURE__*/_jsx(\"p\",{children:paragraph.split('\\n').reduce(function(total,line){return[total,/*#__PURE__*/_jsx(\"br\",{}),line];})});})}),/*#__PURE__*/_jsxs(Container,{fluid:true,children:[/*#__PURE__*/_jsxs(Form,{onChange:function onChange(event){event.preventDefault();_this2.setState({blockNumber:_this2.blockNumber.value,nonce:_this2.nonce.value,data:_this2.data.value,hash:sha256(_this2.getSequence()),//red\ncolor:\"#F75D59\"});},children:[/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Block Number:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",ref:function ref(input){return _this2.blockNumber=input;},value:this.state.blockNumber})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Nonce:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",ref:function ref(input){return _this2.nonce=input;},value:this.state.nonce})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Data:\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",type:\"text\",placeholder:\"\",ref:function ref(input){return _this2.data=input;},value:this.state.data})]}),/*#__PURE__*/_jsxs(Form.Group,{children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Hash:\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",value:this.state.hash,readOnly:true})]})]}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(event){event.preventDefault();_this2.mine(_this2.state.blockNumber,_this2.state.data);},children:\"Press\"})]})]});}}]);return Block;}(Component);export default Block;","map":{"version":3,"sources":["/Users/ericboris/Developer/CSE442/a4/src/components/Coinbase/Coinbase.js"],"names":["React","Component","Container","Form","Button","sha256","difficulty","maximumNonce","Block","props","title","body","state","pattern","repeat","blockNumber","nonce","data","hash","color","getSequence","bind","mine","handleColorChange","col","getColor","value","toString","sequence","substr","setState","split","map","paragraph","reduce","total","line","event","preventDefault","input"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Container, Form, Button } from 'react-bootstrap';\nimport { sha256 } from 'js-sha256';\n//import {render} from \"react-dom\";\n//import get from '../../descriptionLoader';\n\nlet difficulty = 4;        // number of zeros required at front of hash\nlet maximumNonce = 500000; // limit the nonce to this so we don't mine too long\n\nclass Block extends Component {\n    constructor(props) {\n        super(props);\n        const [title, body] = [\"Coinbase [WORK IN PROGRESS] \", \"Coinbase's Description\"];\n        this.state = {\n            pattern: '0'.repeat(difficulty),\n            blockNumber: 1,\n            nonce: 72608,\n            data: \"\",\n            hash: sha256(\"1\" + \"72608\" + \"\"),\n            title,\n            body,\n            //green\n            color: \"#50C878\"\n        };\n        this.getSequence = this.getSequence.bind(this);\n        this.mine = this.mine.bind(this);\n        this.handleColorChange = this.handleColorChange.bind(this);\n    }\n\n    handleColorChange() {\n        var col = this.state.color\n        this.props.getColor(col)\n    }\n\n    getSequence() {\n        return (this.blockNumber.value.toString() + this.nonce.value.toString() + this.data.value.toString());\n    }\n\n    /* Find a nonce s.t. the hash of the string concatenation of\n     * blockNumber, nonce, and data fields (IN THAT ORDER!) results in a hash\n     * that starts with n=difficulty many zeros.\n     * Updates the state with the found nonce and hash.\n     */\n    mine(blockNumber, data) {\n        let sequence = null;\n        let hash = null;\n        for (let nonce = 0; nonce <= maximumNonce; nonce++) {\n            sequence = blockNumber.toString() + nonce.toString() + data.toString();\n            hash = sha256(sequence);\n            if (hash.substr(0, difficulty) === this.state.pattern) {\n                this.setState({hash, nonce});\n                return;\n            }\n        }\n        this.setState({color: \"#50C878\"});\n        this.handleColorChange(this.state.color);\n\n    }\n\n    render() {\n        return (\n            <Container fluid>\n                <h2>\n                    {this.state.title}\n                </h2>\n                <div>\n                    {this.state.body.split('\\n\\n').map(paragraph =>\n                        <p>\n                            {paragraph.split('\\n').reduce((total, line) => [total, <br />, line])}\n                        </p>\n                    )}\n                </div>\n                <Container fluid>\n                    <Form  onChange={(event) => {\n                        event.preventDefault();\n                        this.setState({\n                            blockNumber: this.blockNumber.value,\n                            nonce: this.nonce.value,\n                            data: this.data.value,\n                            hash : sha256(this.getSequence()),\n                            //red\n                            color: \"#F75D59\"\n                        });\n                    }}>\n                        <Form.Group>\n                            <Form.Label>\n                                Block Number:\n                            </Form.Label>\n                            <Form.Control\n                                type=\"number\"\n                                ref={(input) =>\n                                    this.blockNumber = input\n                                }\n                                value = {this.state.blockNumber}\n                            />\n                        </Form.Group>\n                        <Form.Group>\n                            <Form.Label>\n                                Nonce:\n                            </Form.Label>\n                            <Form.Control\n                                type=\"number\"\n                                ref={(input) =>\n                                    this.nonce = input\n                                }\n                                value = {this.state.nonce}\n                            />\n                        </Form.Group>\n                        <Form.Group>\n                            <Form.Label>\n                                Data:\n                            </Form.Label>\n                            <Form.Control\n                                as=\"textarea\"\n                                type=\"text\"\n                                placeholder=\"\"\n                                ref={(input) =>\n                                    this.data = input\n                                }\n                                value = {this.state.data}\n                            />\n                        </Form.Group>\n                        <Form.Group>\n                            <Form.Label>\n                                Hash:\n                            </Form.Label>\n                            <Form.Control\n                                type=\"text\"\n                                value= {this.state.hash}\n                                readOnly\n                            />\n                        </Form.Group>\n                    </Form>\n                    <Button onClick={(event) => {\n                        event.preventDefault();\n                        this.mine(this.state.blockNumber, this.state.data);\n                    }}>\n                        Press\n                    </Button>\n                </Container>\n            </Container>\n        );\n    }\n}\n\nexport default Block;\n"]},"metadata":{},"sourceType":"module"}